{"ast":null,"code":"import React,{useEffect,useState}from'react';import Newsitem from'./Newsitem';import Spinner from'./Spinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function News(props){const[articles,setArticles]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[totalResults,setTotalResults]=useState(0);const updateNews=async()=>{let url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=ab8c818ebccf4aec9bb13d1ca06b1ddf&page=\").concat(page,\"&pagesize=\").concat(props.pageSize);setLoading(true);let data=await fetch(url);// props.setProgress(30)\nlet parsedData=await data.json();// props.setProgress(70)\nsetArticles(parsedData.articles||[]);setTotalResults(parsedData.totalResults||0);setLoading(false);};useEffect(()=>{updateNews(page);},[page]);const handlePreviousClick=async()=>{setPage(page-1);// updateNews()\n};const handleNextClick=async()=>{setPage(page+1);// updateNews()\n};console.log('page :>> ',page);console.log('loading :>> ',loading);return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center my-5  \",children:\"Taaza Khabar - Top headlines\"}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-5 \",children:!loading&&articles.map(element=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 \",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title?element.title:\"\",description:element.description?element.description:\"\",imageUrl:element.urlToImage,newsUrl:element.url,author:element.author,date:element.publishedAt})},element.url);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:page<=1,className:\"btn btn-dark\",onClick:handlePreviousClick,children:\" \\u2190 Previous\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:page+1>Math.ceil(totalResults/props.pageSize),className:\"btn btn-dark\",onClick:handleNextClick,children:\"Next \\u2192\"})]})]});}export default News;News.defaultProps={country:'in',pageSize:8,category:'general'};","map":{"version":3,"names":["React","useEffect","useState","Newsitem","Spinner","jsx","_jsx","jsxs","_jsxs","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","updateNews","url","concat","country","category","pageSize","data","fetch","parsedData","json","handlePreviousClick","handleNextClick","console","log","className","children","map","element","title","description","imageUrl","urlToImage","newsUrl","author","date","publishedAt","type","disabled","onClick","Math","ceil","defaultProps"],"sources":["C:/Users/RENCY/Desktop/React_practice/newsapp/src/component/News.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Newsitem from './Newsitem'\r\nimport Spinner from './Spinner'\r\nimport PropTypes from 'prop-types'\r\n\r\nfunction News(props) {\r\n    const [articles, setArticles] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [page, setPage] = useState(1)\r\n    const [totalResults, setTotalResults] = useState(0)\r\n\r\n\r\n\r\n    const updateNews = async () => {\r\n        let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=ab8c818ebccf4aec9bb13d1ca06b1ddf&page=${page}&pagesize=${props.pageSize}`;\r\n        setLoading(true)\r\n        let data = await fetch(url);\r\n        // props.setProgress(30)\r\n        let parsedData = await data.json();\r\n        // props.setProgress(70)\r\n        setArticles(parsedData.articles || [])\r\n        setTotalResults(parsedData.totalResults || 0)\r\n        setLoading(false)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        updateNews(page);\r\n    }, [page])\r\n\r\n    const handlePreviousClick = async () => {\r\n        setPage(page - 1)\r\n        // updateNews()\r\n    }\r\n\r\n    const handleNextClick = async () => {\r\n        setPage(page + 1);\r\n        // updateNews()\r\n    }\r\n\r\n    \r\n    console.log('page :>> ', page);\r\n\r\n    console.log('loading :>> ', loading);\r\n    return (\r\n\r\n        <div className=\"container my-4\">\r\n            <h1 className='text-center my-5  ' >Taaza Khabar - Top headlines</h1>\r\n            {loading && <Spinner />}\r\n\r\n            {/* {articles?.length > 0 && */}\r\n\r\n            <div className=\"row my-5 \">\r\n                {!loading && articles.map((element) => {\r\n                    return <div className=\"col-md-4 \" key={element.url}>\r\n                        <Newsitem title={element.title ? element.title : \"\"} description={element.description ? element.description : \"\"} imageUrl={element.urlToImage} newsUrl={element.url} author={element.author} date={element.publishedAt} />\r\n                    </div>\r\n                })}\r\n            </div>\r\n            {/* } */}\r\n\r\n\r\n            <div className=\"container d-flex justify-content-between\">\r\n                <button type=\"button\" disabled={page <= 1} className=\"btn btn-dark\" onClick={handlePreviousClick}> &larr; Previous</button>\r\n                <button type=\"button\" disabled={page + 1 > Math.ceil(totalResults / props.pageSize)} className=\"btn btn-dark\" onClick={handleNextClick}>Next &rarr;</button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default News;\r\nNews.defaultProps = {\r\n    country: 'in',\r\n    pageSize: 8,\r\n    category: 'general'\r\n}\r\nNews.propTypes = {\r\n    country: PropTypes.string,\r\n    pageSize: PropTypes.number,\r\n    category: PropTypes.string\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}